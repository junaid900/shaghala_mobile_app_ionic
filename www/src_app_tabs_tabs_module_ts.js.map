{"version":3,"file":"src_app_tabs_tabs_module_ts.js","mappings":";;;;;;;;;;;;;;;AAA6C;AAItC,MAAM,UAAU,GAAG,CAAC,KAAe,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAErD,MAAM,UAAU,GAAG,2DAAc,CACpC,UAAU,EACV,CAAC,KAAgB,EAAE,EAAE;IACjB,OAAO,KAAK,CAAC,IAAI,CAAC;AACtB,CAAC,CACJ;;;;;;;;;;;;;;;;;;;;ACXwC;AACc;AAChB;AAEvC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,MAAM;QACZ,SAAS,EAAE,gDAAQ;QACnB,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,MAAM;gBACZ,YAAY,EAAE,GAAG,EAAE,CAAC,yMAA6B,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;aAC9E;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,YAAY,EAAE,GAAG,EAAE,CAAC,yMAA6B,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;aAC9E;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,YAAY,EAAE,GAAG,EAAE,CAAC,iNAAiC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC;aACpF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAC,EAAC,IAAI,EAAC,SAAS,EAAC;gBACrB,YAAY,EAAE,GAAG,EAAE,CAAC,iNAAiC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC;gBACnF,uGAAuG;aACxG;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,YAAY,EAAE,GAAG,EAAE,CAAC,6PAAuD,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,0BAA0B,CAAC;aACpH;YACD;gBACE,IAAI,EAAE,EAAE;gBACR,UAAU,EAAE,WAAW;gBACvB,SAAS,EAAE,MAAM;aAClB;SACF;KACF;IACD;QACE,IAAI,EAAE,EAAE;QACR,UAAU,EAAE,WAAW;QACvB,SAAS,EAAE,MAAM;KAClB;CACF,CAAC;IAKW,qBAAqB,SAArB,qBAAqB;CAAG;AAAxB,qBAAqB;IAHjC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;KACzC,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChDW;AACJ;AACM;AACF;AAEiB;AAEvB;AACe;IAYzC,cAAc,SAAd,cAAc;CAAG;AAAjB,cAAc;IAV1B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,uDAAW;YACX,yDAAY;YACZ,uDAAW;YACX,uEAAqB;YACrB,gEAAe;SAChB;QACD,YAAY,EAAE,CAAC,gDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBe;AACD;AAEQ;AACb;AACmB;AACF;AACiD;AACrC;AACK;AACb;AAEA;IAM5C,QAAQ,SAAR,QAAQ;IAMnB,YAAoB,KAAY,EACtB,MAAc,EACd,GAAe,EACf,YAA0B,EAC1B,SAA0B,EAC1B,SAA2B;QALjB,UAAK,GAAL,KAAK,CAAO;QACtB,WAAM,GAAN,MAAM,CAAQ;QACd,QAAG,GAAH,GAAG,CAAY;QACf,iBAAY,GAAZ,YAAY,CAAc;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAkB;QAVrC,mBAAmB;QACZ,SAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,iEAAU,CAAC,CAAC;QAC5C,cAAS,GAAY,KAAK,CAAC;QAUzB,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IACK,OAAO;;YACX,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC;YAC9B,qBAAqB;QACvB,CAAC;KAAA;IACD,eAAe;QACb,IAAI,IAAI,GAAG,iEAAO,EAAE,CAAC;QACrB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,6EAAiB,EAAE,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,IAAI,IAAI,OAAO,EAAE;YACxB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACrB,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAChC;IACH,CAAC;IACD,eAAe;QACb,yBAAyB;QACzB,IAAI,IAAI,CAAC,QAAQ;YACf,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACjC,CAAC;IACD,uBAAuB;QACrB,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,GAAG,EAAE;YAC/B,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACpB,IAAI,iEAAO,EAAE;gBACX,IAAI,iEAAO,EAAE,CAAC,IAAI,IAAI,OAAO;oBAC3B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC/B,CAAC,EAAE,IAAI,CAAC;IACV,CAAC;IACD,QAAQ;QAEN,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAC7C,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;YAChC,IAAI,IAAI,CAAC,IAAI,IAAI,SAAS,EAAE;gBAC1B,IAAI,IAAI,CAAC,aAAa,EAAE;oBACtB,IAAI,CAAC,UAAU,EAAE,CAAC;iBACnB;qBAAM;oBACL,IAAI,CAAC,UAAU,EAAE,CAAC;iBACnB;aACF;QACH,CAAC,CAAC,CAAC;IAEL,CAAC;IACK,SAAS,CAAC,IAAI;;YAClB,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;YAC/B,IAAI,GAAG,iEAAO,EAAE,CAAC;YACjB,IAAI,IAAI,CAAC,aAAa,EAAE;gBACtB,IAAI,CAAC,UAAU,EAAE,CAAC;aACnB;YACD,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,oEAAc,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;YAC9E,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACpB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtB,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;YACvC,IAAI,QAAQ,EAAE;gBACZ,iEAAO,CAAC,QAAQ,CAAC,CAAC;gBAClB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;gBACvC,IAAI,QAAQ,CAAC,IAAI,IAAI,SAAS,EAAE;oBAC9B,IAAI,QAAQ,CAAC,aAAa,EAAE;wBAC1B,IAAI,CAAC,UAAU,EAAE,CAAC;qBACnB;yBAAM;wBACL,IAAI,CAAC,UAAU,EAAE,CAAC;qBACnB;iBACF;aACF;iBAAM;gBACL,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;gBAC/B,gEAAM,EAAE,CAAC;gBACT,6EAAiB,EAAE,CAAC;gBACpB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;aAClC;QAEH,CAAC;KAAA;IACD,UAAU;QACR,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IACD,UAAU;QACR,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IACK,WAAW;;YACf,uBAAuB;YACrB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACxC,MAAM,EAAE,qBAAqB;gBAC7B,eAAe,EAAC,KAAK;gBACrB,OAAO,EAAE,CAAC;wBACR,IAAI,EAAC,IAAI;wBACT,OAAO,EAAC,CAAC,SAAS,EAAC,EAAE;4BACnB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;4BACvB,IAAG,SAAS,EAAC;gCACX,IAAG,SAAS,CAAC,MAAM,GAAG,CAAC;oCAEvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,EAAC;wCAC/B,WAAW,EAAC;4CACV,QAAQ,EAAE,SAAS;yCACpB;qCACF,CAAC,CAAC;6BACJ;wBACH,CAAC;qBACF,CAAC;gBACF,MAAM,EAAE;oBACN;wBACE,KAAK,EAAE,MAAM,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE;wBACrD,IAAI,EAAE,OAAO;wBACb,KAAK,EAAE,QAAQ;qBAChB;oBACD;wBACE,KAAK,EAAE,MAAM,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,SAAS,EAAE;wBAC1D,IAAI,EAAE,OAAO;wBACb,KAAK,EAAE,aAAa;qBACrB;iBACF;aACF,CAAC,CAAC;YAEH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YAGxB,IAAI;YACJ,qCAAqC;QACvC,CAAC;KAAA;IACK,iBAAiB;;YACrB,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,0EAAoB,GAAG,GAAG,GAAG,iEAAO,EAAE,CAAC,OAAO,EAAC,cAAc,CAAC,CAAC;YACxG,4CAA4C;YAC5C,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,KAAK,CAAC;aACrC;QACH,CAAC;KAAA;CAEF;;YA1JQ,8CAAK;YAHL,oDAAM;YAKN,6DAAU;YAIV,iEAAY;YAPZ,4DAAe;YAEf,kEAAgB;;AAaZ,QAAQ;IALpB,yDAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,sKAA6B;;KAE9B,CAAC;GACW,QAAQ,CA4IpB;AA5IoB;;;;;;;;;;;;;;;AClBrB,iEAAe,mqBAAmqB,aAAa,0EAA0E,oSAAoS,0IAA0I,6JAA6J,eAAe,iFAAiF,6MAA6M","sources":["./src/app/store/user/user.selector.ts","./src/app/tabs/tabs-routing.module.ts","./src/app/tabs/tabs.module.ts","./src/app/tabs/tabs.page.ts","./src/app/tabs/tabs.page.html"],"sourcesContent":["import { createSelector } from \"@ngrx/store\";\nimport { AppState } from \"../app.store\";\nimport { UserState } from \"./user.reducer\";\n\nexport const StatedUser = (state: AppState) => (state.user);\n\nexport const selectUser = createSelector(\n    StatedUser,\n    (state: UserState) => {\n        return state.user;\n    }\n)","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { TabsPage } from './tabs.page';\n\nconst routes: Routes = [\n  {\n    path: 'tabs',\n    component: TabsPage,\n    children: [\n      {\n        path: 'tab1',\n        loadChildren: () => import('../tab1/tab1.module').then(m => m.Tab1PageModule)\n      },\n      {\n        path: 'tab2',\n        loadChildren: () => import('../home/home.module').then(m => m.HomePageModule)\n      },\n      {\n        path: 'tab3',\n        loadChildren: () => import('../worker/worker.module').then(m => m.WorkerPageModule)\n      },\n      {\n        path: 'tab4',\n        data:{type:'company'},\n        loadChildren: () => import('../worker/worker.module').then(m => m.WorkerPageModule)\n        // loadChildren: () => import('../company-list/company-list.module').then(m => m.CompanyListPageModule)\n      },\n      {\n        path: 'tab5',\n        loadChildren: () => import('../notification-list/notification-list.module').then(m => m.NotificationListPageModule)\n      },\n      {\n        path: '',\n        redirectTo: 'tabs/tab2',\n        pathMatch: 'full'\n      }\n    ]\n  },\n  {\n    path: '',\n    redirectTo: 'tabs/tab2',\n    pathMatch: 'full'\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n})\nexport class TabsPageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { TabsPageRoutingModule } from './tabs-routing.module';\n\nimport { TabsPage } from './tabs.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    TabsPageRoutingModule,\n    TranslateModule,\n  ],\n  declarations: [TabsPage]\n})\nexport class TabsPageModule {}\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Storage } from '@capacitor/storage';\nimport { AlertController } from '@ionic/angular';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ApiService } from '../services/api.service';\nimport { getNotificationCount, getUserByIdApi, getWorkerByUserApi } from '../services/api_url.hepler';\nimport { generateLocalUser } from '../services/constrant.helper';\nimport { getUser, logout, setUser } from '../services/session.helper';\nimport { StoreService } from '../services/store.service';\nimport { loadUser } from '../store/user/user.action';\nimport { selectUser } from '../store/user/user.selector';\n@Component({\n  selector: 'app-tabs',\n  templateUrl: 'tabs.page.html',\n  styleUrls: ['tabs.page.scss']\n})\nexport class TabsPage {\n  // storage:Storage;\n  public user = this.store.select(selectUser);\n  subDialog: boolean = false;\n  notifications: 0;\n  interval: any;\n  constructor(private store: Store,\n    private router: Router,\n    private api: ApiService,\n    private storeService: StoreService,\n    private alertCtrl: AlertController,\n    private translate: TranslateService,\n    ) {\n    this.getData();\n  }\n  async getData() {\n    this.storeService.initStore();\n    // this.showDialog();\n  }\n  ionViewDidEnter() {\n    let user = getUser();\n    if (!user.type) {\n      generateLocalUser();\n    }\n    if (user.type != 'local') {\n      this.checkUser(user);\n      this.setNotificationInterval();\n    }\n  }\n  ionViewDidLeave() {\n    // this.interval.cancel()\n    if (this.interval)\n      clearInterval(this.interval);\n  }\n  setNotificationInterval() {\n    this.interval = setInterval(() => {\n      console.log(\"here\");\n      if (getUser())\n        if (getUser().type != 'local')\n          this.startNotification();\n    }, 5000)\n  }\n  ngOnInit() {\n\n    this.storeService.currentUser.subscribe(user => {\n      console.log(\"Store User\", user);\n      if (user.type == \"Company\") {\n        if (user.is_subscribed) {\n          this.hideDialog();\n        } else {\n          this.showDialog();\n        }\n      }\n    });\n\n  }\n  async checkUser(user) {\n    console.log(\"checkUser\", user);\n    user = getUser();\n    if (user.is_subscribed) {\n      this.hideDialog();\n    }\n    var response = await this.api.getRequest(getUserByIdApi + \"/\" + user.user_id);\n    console.log('tabs');\n    console.log(response);\n    console.log(\"user_response\", response);\n    if (response) {\n      setUser(response);\n      this.storeService.changeUser(response);\n      if (response.type == \"Company\") {\n        if (response.is_subscribed) {\n          this.hideDialog();\n        } else {\n          this.showDialog();\n        }\n      }\n    } else {\n      console.log(\"session expired\");\n      logout();\n      generateLocalUser();\n      this.router.navigate(['login']);\n      this.hideDialog();\n      this.storeService.changeUser({});\n    }\n\n  }\n  showDialog() {\n    this.subDialog = true;\n  }\n  hideDialog() {\n    this.subDialog = false;\n  }\n  async goToPayment() {\n    // async goToPayment(){\n      const alert = await this.alertCtrl.create({\n        header: 'Select subscription',\n        backdropDismiss:false,\n        buttons: [{\n          text:'Ok',\n          handler:(alertData)=>{\n            console.log(alertData);\n            if(alertData){\n              if(alertData.length > 0)\n  \n              this.router.navigate(['payment'],{\n                queryParams:{\n                  sub_type: alertData,\n                }\n              });\n            }\n          }\n        }],\n        inputs: [\n          {\n            label: await this.translate.get('Annual').toPromise(),\n            type: 'radio',\n            value: 'annual',\n          },\n          {\n            label: await this.translate.get('Sami Annual').toPromise(),\n            type: 'radio',\n            value: 'sami_annual'\n          }\n        ]\n      });\n  \n      await alert.present();\n  \n      \n    // }\n    // this.router.navigate(['payment']);\n  }\n  async startNotification() {\n    var response = await this.api.getRequest(getNotificationCount + \"/\" + getUser().user_id,\"notification\");\n    // console.log(\"notify_response\", response);\n    if (response) {\n      this.notifications = response.count;\n    }\n  }\n\n}\n","export default \"<ion-tabs>\\n  <div class=\\\"payment-overlay\\\" *ngIf=\\\"subDialog\\\">\\n    <ion-row class=\\\"payment-overlay-row\\\">\\n      <ion-col size=\\\"12\\\">\\n        <h3 class=\\\"p0 m0\\\">Warning!</h3>\\n      </ion-col>\\n      <ion-col size=\\\"12\\\" class=\\\"pt0\\\">\\n        <p class=\\\"p0 m0\\\">Subscribe to publish your ads.</p>\\n      </ion-col>\\n      <ion-col>\\n        <ion-button size=\\\"small\\\" (click)=\\\"hideDialog()\\\">\\n          Close\\n        </ion-button>\\n        <ion-button size=\\\"small\\\" (click)=\\\"goToPayment()\\\">\\n          Subscribe\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </div>\\n  <!-- Tabs -->\\n  <ion-tab-bar slot=\\\"bottom\\\" style=\\\"--background: #7F132A;height: 60px;\\\">\\n\\n    <ion-tab-button tab=\\\"tab2\\\">\\n      <img style=\\\"color: white;\\\" src=\\\"assets/images/home.png\\\" alt=\\\"\\\" />\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"tab1\\\">\\n      <img src=\\\"assets/images/favourite.png\\\" alt=\\\"\\\">\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"tab3\\\">\\n      <img src=\\\"assets/images/people_2.png\\\" style=\\\"height: 38px;\\\" alt=\\\"\\\">\\n    </ion-tab-button>\\n    <ion-tab-button tab=\\\"tab4\\\">\\n      <img src=\\\"assets/images/company.png\\\" style=\\\"height: 34px;\\\" alt=\\\"\\\">\\n    </ion-tab-button>\\n    <ion-tab-button tab=\\\"tab5\\\">\\n      <div>\\n        <div class=\\\"notification-count\\\" *ngIf=\\\"notifications > 0\\\">{{notifications}}</div>\\n        <img src=\\\"assets/images/notification.png\\\" style=\\\"height: 34px;\\\" alt=\\\"\\\">\\n      </div>\\n    </ion-tab-button>\\n    <!-- <ion-tab-button tab=\\\"tab4\\\">\\n      <img src=\\\"assets/images/menu_2.png\\\" alt=\\\"\\\">\\n    </ion-tab-button> -->\\n  </ion-tab-bar>\\n\\n</ion-tabs>\";"],"names":[],"sourceRoot":"webpack:///"}